# Resources
[Resources](Resources.module.lua) is the core resource-loader for [RoStrap](https://rostrap.github.io/)

![](https://avatars1.githubusercontent.com/u/22812966?v=4&s=100)

[Resources.module.lua](Resources.module.lua) is designed to simplify the loading of libraries and unify the networking of resources between the client and server.

## Set-up
[Resources](Resources.module.lua) is automatically installed when you setup using the plug-in [NOT RELEASED YET]. To manually install, run the following code in the command bar
```lua
require(821487025)()
```
You should now have a [Folder](http://wiki.roblox.com/index.php?title=API:Class/Folder) called `Repository` in [ServerStorage](http://wiki.roblox.com/index.php?title=API:Class/ServerStorage). This is where all of your ModuleScripts, which we will call Libraries, reside.
## Initialization
To start using the module, simply `require` it.
```lua
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Resources = require(ReplicatedStorage:WaitForChild("Resources"))
```
Upon requiring [Resources](Resources.module.lua) on the server for the first time, it will move [ModuleScripts](http://wiki.roblox.com/index.php?title=API:Class/ModuleScript) from your `Repository` into [ReplicatedStorage](http://wiki.roblox.com/index.php?title=API:Class/ReplicatedStorage) so the client can access the libraries. These will be placed inside ReplicatedStorage.Resources.Modules

 Libraries with "Server" in their name or in the name of a parent folder will not be replicated to clients, and will only be accessible to the server (in [ServerStorage](http://wiki.roblox.com/index.php?title=API:Class/ServerStorage)).
## Functionality and API
Resources' main purpose is to retrieve objects for use on both the client and server, both by the same function. This way modules can run the same code on both the client and server and be guaranteed the resource will always be properly obtained. This allows Modules to run the same code on both the Client and Server.

There are a few built-in functions, all of which have [hybrid syntax with regards to calling](https://docs.crescentcode.net/Freya/Meta/Hybrid):

#### LoadLibrary
```lua
Variant LoadLibrary (string LibraryName)
-- @returns a Library with Name LibraryName
```
A library is constituted of a [ModuleScript](http://wiki.roblox.com/index.php?title=API:Class/ModuleScript) (in ServerStorage.Repository) and its descendants.

![](https://image.prntscr.com/image/hLnGGl3JST_vAZYnYadrGg.png)

To load the `Tween` Library, we would do the following:
```lua
local Tween = Resources:LoadLibrary("Tween")
```
or
```lua
local require = Resources.LoadLibrary
local Tween = require("Tween")
```
Many Libraries developed outside the Resources bootstrapper system rely on using the built-in `require` method on child ModuleScripts, which is why descendants of Libraries are left unmoved. The example below demonstrates how heirarchy within the repository is ignored during replication, except under ModuleScripts (CustomFont by EgoMoose gets to keep its descendants).

![](https://image.prntscr.com/image/ZonjgCDFQLabru0xbMBUNQ.png)

The rest of the functions within [Resources](Resources.module.lua) are procedurally generated, in the form of `GetCLASSNAME` with string parameter `Name`. These functions return an instance under ReplicatedStorage.Resources.CLASSNAMES called `Name`. On the server, missing instances will be generated. On the client, the function will yield until the missing instances are generated by the server.
```lua
local Chatted = Resources:GetRemoteEvent("Chatted")
local ClientLoaded = Resources:GetRemoteFunction("ClientLoaded")
```

Any instance type is compatible with [Resources](Resources.module.lua):

```lua
-- Not sure why you would need to, but this retrieves a TextLabel
-- called "Superman" inside ReplicatedStorage.Resources.TextLabels
local Superman = Resources:GetTextLabel("Superman")
```

In fact, Resources can also manage instances that aren't creatable by `Instance.new`. They must however, be preinstalled into Replicated.Resources. This basically allows you to do things like:
```lua
local Falchion = Resources:GetSword("Falchion")
-- As long as this exists as Resources.Swords.Falchion,
-- it will be retrieved

-- The function generator will remove "Get" from "GetSword"
-- It will then add "s" to "Sword" and thus expect the Folder
-- to be named "Swords"
```

If you want to access local storage (not replicated across the client-server model), you can add `Local` before `CLASSNAME` to access it. On the server, local storage is located in [ServerStorage](http://wiki.roblox.com/index.php?title=API:Class/ServerStorage). On the client, "local storage" is located in [LocalPlayer](http://wiki.roblox.com/index.php?title=API:Class/Players/LocalPlayer). Everything Resources stores goes into folders named `Resources`.
### Ideas
#### Map Changer
Try using Resources to manage other things like Maps for a game! Make a Folder named "Maps" inside Resources and it can then be accessed!
```lua
local Resources = require(ReplicatedStorage.Resources)
local Hometown = Resources:GetMap("Hometown v2")
Hometown.Parent = workspace
```
#### Gun system
```lua
-- Server-side
local GunThePlayerJustBought = Resources:GetLocalGun("Ak47")
-- Finds `ServerStorage.Resources.Guns.Ak47`
-- Make sure the above exists if you want to use it for things that are not valid Roblox Classes
-- Otherwise, Resources will error trying to do Instance.new("Gun")

GunThePlayerJustBought:Clone().Parent = PlayerBackpackThatBoughtIt
```

## Contact
If you have any questions, concerns, or feature requests, feel free to [message Validark on roblox](https://www.roblox.com/messages/compose?recipientId=2966752). There is also a dedicated issues tab at the top of this page, should you feel inclined to use that. Please send all hatemail, noodles, or unsavory requests to [devSparkle](https://www.roblox.com/messages/compose?recipientId=1631699)
